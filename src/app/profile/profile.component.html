<div class="content marge">
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-4 col-md-5">
        <div class="card card-user" *ngIf="user; else notcarduser">
          <div class="image">
            <img src="{{user.photo}}" alt="..." id="photo" />
          </div>
          <div class="content">
            <div class="author">
              <img class="avatar border-white" src="{{user.photo}}" alt="..." id="photo2" />
              <h4 class="title">{{user.username}}
                <br />
                <a href="#">
                  <small>{{user.email}}</small>
                </a>
              </h4>
            </div>
            <p class="description text-center">
              {{user.specialityTitle}}
              <br> {{user.speciality}}
            </p>
          </div>
          <hr>
          <div class="text-center">
            <div class="text-center">
              <div class="input-group">
                <span class="input-group-btn">
                  <label class="btn btn-success btn-xs">
                    <i class="fa fa-upload" aria-hidden="true"></i>
                    change photo profile
                    <input type="file" id="fichier" name="fichier" (change)="fileChangeEvent($event);" style="display: none;" accept=".png,.jpg">
                  </label>
                </span>
              </div>
            </div>
          </div>
        </div>
        <ng-template #notcarduser>
          loading
          <fa *ngIf="loading" name="spinner" animation="spin"></fa>
        </ng-template>
      </div>
      <div class="col-lg-8 col-md-7">
        <div class="card">
          <div class="header">
            <h4 class="title">Edit Profile</h4>
          </div>
          <hr>
          <div class="content">
            <div *ngIf="user; else notuser">
              <form name="form" (ngSubmit)="f.form.valid && updateInfo()" #f="ngForm" novalidate>
                <div class="row">
                  <div class="col-md-5">
                    <div class="form-group">
                      <label>Username</label>
                      <input type="text" class="form-control border-input" disabled placeholder="Company" name="username" value="{{user.username}}">
                    </div>
                  </div>
                  <div class="col-md-5">
                    <div class="form-group">
                      <label>Subscription date</label>
                      <input type="text" class="form-control border-input" disabled placeholder="Username" value="{{user.subscriptionDate}}">
                    </div>
                  </div>
                  <div class="col-md-2">

                  </div>
                </div>

                <div class="row">
                  <div class="col-md-4">
                    <div class="form-group">
                      <label>First Name</label>
                      <input type="text" class="form-control border-input" placeholder="Company" name="firstname" [(ngModel)]="user.firstname"
                        #firstname="ngModel" required pattern=".{4,}">
                      <div *ngIf="f.submitted && !firstname.valid" class="help-block">4 carac min</div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                      <label>Last Name</label>
                      <input type="text" class="form-control border-input" placeholder="Last Name" name="lastname" [(ngModel)]="user.lastname"
                        #lastname="ngModel" required pattern=".{4,}">
                      <div *ngIf="f.submitted && !lastname.valid" class="help-block">4 carac min</div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                      <label>Email address</label>
                      <input type="email" class="form-control border-input" placeholder="Email" name="email" [(ngModel)]="user.email" #email="ngModel"
                        required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$">
                      <div *ngIf="f.submitted && !email.valid" class="help-block">invalid email</div>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-9">
                    <div class="form-group">
                      <label>Address</label>
                      <input type="text" class="form-control border-input" placeholder="Home Address" name="adresse1" [(ngModel)]="user.adresse1"
                        #adresse1="ngModel" required pattern=".{10,}">
                      <div *ngIf="f.submitted && !adresse1.valid" class="help-block">10 carac min</div>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="form-group">
                      <label>Phone</label>
                      <input type="text" class="form-control border-input" placeholder="Phone" name="phone" [(ngModel)]="user.phone" #phone="ngModel"
                        required pattern=".{6,}">
                      <div *ngIf="f.submitted && !phone.valid" class="help-block">6 carac min</div>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-4">
                    <div class="form-group">
                      <label>City</label>
                      <input type="text" class="form-control border-input" placeholder="City" name="city" [(ngModel)]="user.city" #city="ngModel"
                        required pattern=".{4,}">
                      <div *ngIf="f.submitted && !city.valid" class="help-block">4 carac min</div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                      <label>Country</label>
                      <input type="text" class="form-control border-input" placeholder="Country" name="country" [(ngModel)]="user.country" #country="ngModel"
                        required pattern=".{4,}">
                      <div *ngIf="f.submitted && !country.valid" class="help-block">4 carac min</div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                      <label>Postal Code</label>
                      <input type="number" class="form-control border-input" placeholder="Postal code" name="postalCode" [(ngModel)]="user.postalCode"
                        #postalCode="ngModel" required pattern=".{4,}">
                      <div *ngIf="f.submitted && !postalCode.valid" class="help-block">4 carac min</div>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Title</label>
                      <select class="custom-select mb-2 mr-sm-2 mb-sm-0 border-input form-control" id="title" name="title" [(ngModel)]="user.title"
                        #title="ngModel" required>
                        <option *ngFor="let titre of titles" value="{{titre}}">{{titre}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Position</label>
                      <input type="text" class="form-control border-input" placeholder="Position" name="position" [(ngModel)]="user.position" #position="ngModel">
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-4">
                    <div class="form-group">
                      <label>Speciality Title</label>
                      <select class="custom-select mb-2 mr-sm-2 mb-sm-0 border-input form-control" id="specialityTitleSelect" name="specialityTitle"
                        [(ngModel)]="user.specialityTitle" #specialityTitle="ngModel" (ngModelChange)="change($event);" required>
                        <option *ngFor="let specialitytitle of specialitytitles" value="{{specialitytitle}}">{{specialitytitle}}</option>
                      </select>
                      <div *ngIf="f.submitted && !specialityTitle.valid" class="help-block">select an option</div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                      <label>Speciality</label>
                      <select class="custom-select mb-2 mr-sm-2 mb-sm-0 border-input form-control" id="speciality" name="speciality" [(ngModel)]="user.speciality"
                        #speciality="ngModel" required>
                        <option *ngFor="let speciality of getSpeciality()" value="{{speciality}}">{{speciality}}</option>
                      </select>
                      <div *ngIf="f.submitted && !speciality.valid" class="help-block">select an option</div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-group">
                      <label>Affiliation</label>
                      <select class="custom-select mb-2 mr-sm-2 mb-sm-0 border-input form-control" id="affiliation" name="affiliation" [(ngModel)]="user.affiliation"
                        #affiliation="ngModel" required>
                        <option *ngFor="let affiliation of affiliations" value="{{affiliation}}">{{affiliation}}</option>
                      </select>
                      <div *ngIf="f.submitted && !affiliation.valid" class="help-block">select an option</div>
                    </div>
                  </div>
                </div>
                <br>
                <div class="text-center">
                  <button type="submit" class="btn btn-info btn-fill btn-wd">Update Profile</button>
                </div>
                <div class="clearfix"></div>
              </form>
            </div>
            <ng-template #notuser>
              loading
              <fa *ngIf="loading" name="spinner" animation="spin"></fa>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>