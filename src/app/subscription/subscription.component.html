<div class="row justify-content-center top">
  <div class="col-lg-9 col-md-10">
    <div class="card">
      <div class="header">
        <div class="row">
          <div class="col-md-4">
            <img class="avatar border-white" src="{{user.photo}}" alt="..." *ngIf="user && user.photo; else elseBlock" />
            <ng-template #elseBlock>
              <button class="btn btn-icon">select image profile</button>
            </ng-template>
          </div>
          <div class="col-md-8">
            <h4 class="display-4">Subscription</h4>
          </div>
        </div>
      </div>
      <hr>
      <div class="content">
        <form name="form" (ngSubmit)="f.form.valid && subscription()" #f="ngForm" novalidate>
          <div class="row">
            <div class="col-md-5">
              <div class="form-group">
                <label>Username</label>
                <input type="text" class="form-control border-input" placeholder="Username" name="username" [(ngModel)]="user.username"
                  #username="ngModel" required pattern="[a-z0-9]{3,}">
                <div *ngIf="f.submitted && !username.valid" class="help-block">lowercase and numeric only, 3 carac min</div>
                <div *ngIf="error" class="alert alert-danger">{{error}}</div>
              </div>
            </div>
            <div class="col-md-7">
              <div class="form-group">
                <label>password</label>
                <input type="password" class="form-control border-input" placeholder="password" name="password" [(ngModel)]="user.password"
                  #password="ngModel" required pattern=".{8,}">
                <div *ngIf="f.submitted && !password.valid" class="help-block">8 caracters min</div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label>First Name</label>
                <input type="text" class="form-control border-input" placeholder="FisrtName" name="firstname" [(ngModel)]="user.firstname"
                  #firstname="ngModel" required pattern=".{4,}">
                <div *ngIf="f.submitted && !firstname.valid" class="help-block">4 carac min</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label>Last Name</label>
                <input type="text" class="form-control border-input" placeholder="Last Name" name="lastname" [(ngModel)]="user.lastname"
                  #lastname="ngModel" required pattern=".{4,}">
                <div *ngIf="f.submitted && !lastname.valid" class="help-block">4 carac min</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label>Email address</label>
                <input type="email" class="form-control border-input" placeholder="Email" name="email" [(ngModel)]="user.email" #email="ngModel"
                  required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$">
                <div *ngIf="f.submitted && !email.valid" class="help-block">invalid email</div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-9">
              <div class="form-group">
                <label>Address</label>
                <input type="text" class="form-control border-input" placeholder="Home Address" name="adresse1" [(ngModel)]="user.adresse1"
                  #adresse1="ngModel" required pattern=".{10,}">
                <div *ngIf="f.submitted && !adresse1.valid" class="help-block">10 carac min</div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group">
                <label>Phone</label>
                <input type="text" class="form-control border-input" placeholder="Phone" name="phone" [(ngModel)]="user.phone" #phone="ngModel"
                  required pattern=".{6,}">
                <div *ngIf="f.submitted && !phone.valid" class="help-block">6 carac min</div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label>City</label>
                <input type="text" class="form-control border-input" placeholder="City" name="city" [(ngModel)]="user.city" #city="ngModel"
                  required pattern=".{4,}">
                <div *ngIf="f.submitted && !city.valid" class="help-block">4 carac min</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label>Country</label>
                <input type="text" class="form-control border-input" placeholder="Country" name="country" [(ngModel)]="user.country" #country="ngModel"
                  required pattern=".{4,}">
                <div *ngIf="f.submitted && !country.valid" class="help-block">4 carac min</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label>Postal Code</label>
                <input type="number" class="form-control border-input" placeholder="Postal code" name="postalCode" [(ngModel)]="user.postalCode"
                  #postalCode="ngModel" required pattern=".{4,}">
                <div *ngIf="f.submitted && !postalCode.valid" class="help-block">4 carac min</div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label>Title</label>
                <select class="custom-select mb-2 mr-sm-2 mb-sm-0 border-input form-control" id="title" name="title"
                  [(ngModel)]="user.title" #specialityTitle="ngModel" required>
                  <option *ngFor="let title of titles" value="{{title}}">{{title}}</option>
                </select>

                <div *ngIf="f.submitted && !specialityTitle.valid" class="help-block">select an option</div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label>Position</label>
                <input type="text" class="form-control border-input" placeholder="Position" name="position" [(ngModel)]="user.position"
                  #position="ngModel">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label>Speciality Title</label>
                 <select class="custom-select mb-2 mr-sm-2 mb-sm-0 border-input form-control" id="specialityTitleSelect" name="specialityTitle"
                  [(ngModel)]="user.specialityTitle" #specialityTitle="ngModel" (ngModelChange)="change($event);" required>
                  <option *ngFor="let specialitytitle of specialitytitles" value="{{specialitytitle}}">{{specialitytitle}}</option>
                </select>
                <div *ngIf="f.submitted && !specialityTitle.valid" class="help-block">select an option</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group">
                <label>Speciality</label>
                 <select class="custom-select mb-2 mr-sm-2 mb-sm-0 border-input form-control" id="specialitySelect" name="speciality" [(ngModel)]="user.speciality"
                  #speciality="ngModel" required>
                  <option *ngFor="let speciality of getSpeciality()" value="{{speciality}}">{{speciality}}</option>
                </select>
                <div *ngIf="f.submitted && !speciality.valid" class="help-block">select an option</div>
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-group">
                <label>Affiliation</label>
                <select class="custom-select mb-2 mr-sm-2 mb-sm-0 border-input form-control" id="affiliation" name="affiliation" [(ngModel)]="user.affiliation"
                  #affiliation="ngModel" required>
                  <option *ngFor="let affiliation of affiliations" value="{{affiliation}}">{{affiliation}}</option>
                </select>
                <div *ngIf="f.submitted && !affiliation.valid" class="help-block">select an option</div>
              </div>
            </div>
          </div>
          <br>
          <button type="submit" class="btn btn-info btn-fill btn-wd">Subscribe</button>
          <div class="row justify-content-center">
            you have an account already &nbsp;&nbsp;
            <a routerLink="/login"> login</a>
          </div>

          <div class="clearfix"></div>
        </form>
      </div>
    </div>
  </div>
</div>